---
// Current path detection for active page highlighting
const currentPath = Astro.url.pathname;

import Logo from '../../public/logo.svg';

// Helper function to determine if a path is active
const isActive = (path: string) => {
	return currentPath === path;
};
---

<nav class="fixed top-0 left-0 right-0 z-40 bg-surface/10 backdrop-blur-md">
	<div class="max-w-7xl mx-auto px-6">
		<div class="flex items-center justify-between h-16">
			<!-- Logo (left) -->
			<a href="/" data-astro-prefetch="load" class="logo-link flex items-center gap-3 hover:scale-105 transition-transform">
				<Logo width={32} height={26} />
			</a>

			<!-- Desktop links (center) -->
			<div class="flex items-center gap-8">
				<a href="/" data-astro-prefetch="load" class={`nav-link ${isActive('/') ? 'active' : ''}`}>
					Home
				</a>
				<a href="/features" data-astro-prefetch="load" class={`nav-link ${isActive('/features') ? 'active' : ''}`}>
					Features
				</a>
				<a href="/about" data-astro-prefetch="load" class={`nav-link ${isActive('/about') ? 'active' : ''}`}>
					About
				</a>
			</div>

			<div>&nbsp;</div>
		</div>
	</div>
</nav>

<style>
	/* Desktop nav link styles */
	.nav-link {
		font-family: var(--font-body), system-ui;
		font-size: 0.875rem;
		font-weight: 500;
		transition-property: color;
		transition-duration: 200ms;
		position: relative;
		color: var(--color-muted);
	}

	.nav-link:hover {
		color: var(--color-primary);
	}

	/* Animated underline on hover and active states */
	.nav-link::after {
		content: '';
		position: absolute;
		bottom: -4px;
		left: 0;
		right: 0;
		height: 2px;
		background: var(--color-primary);
		border-radius: 2px;
		transform: scaleX(0);
		transition: transform 0.2s ease;
	}

	.nav-link:hover::after,
	.nav-link.active::after {
		transform: scaleX(1);
	}

	/* Active page styling - more elegant and subtle */
	.nav-link.active {
		font-weight: 600;
		color: var(--color-foreground);
	}

	/* Focus states for accessibility - subtle, not green ring */
	.nav-link:focus {
		outline: 2px solid var(--color-foreground);
		outline-offset: 4px;
		border-radius: 4px;
	}

	.nav-link:focus:not(:focus-visible) {
		outline: none;
	}

</style>
