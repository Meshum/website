---
// Reusable Hero component with animated backgrounds and flexible content
interface Props {
	label: string;
	heading: string;
	gradientText?: string; // Optional gradient portion of heading
	subheading: string;
	variant?: "full-screen" | "tall" | "standard";
	maxWidth?: "4xl" | "5xl" | "6xl";
}

const {
	label,
	heading,
	gradientText,
	subheading,
	variant = "tall",
	maxWidth = "5xl"
} = Astro.props;

const sizeClass = variant === "full-screen"
	? "min-h-screen"
	: variant === "tall"
	? "min-h-[70vh]"
	: "py-32";

const containerClass = maxWidth === "6xl"
	? "max-w-6xl"
	: maxWidth === "4xl"
	? "max-w-4xl"
	: "max-w-5xl";
---

<section class={`relative ${sizeClass} flex items-center justify-center px-6 py-20 bg-linear-to-br from-hero-bg-start via-hero-bg-mid to-hero-bg-end overflow-hidden`}>
	<!-- Animated gradient overlay -->
	<div class="absolute inset-0 opacity-30 dark:opacity-40 bg-linear-to-br from-primary/5 via-transparent to-accent/5 animate-gradient"></div>

	<!-- Mesh background pattern -->
	<div class="absolute inset-0 opacity-5 dark:opacity-10">
		<svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
			<defs>
				<pattern id="hero-mesh" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
					<circle cx="50" cy="50" r="1" fill="currentColor" class="text-foreground"/>
				</pattern>
			</defs>
			<rect width="100%" height="100%" fill="url(#hero-mesh)"/>
		</svg>
	</div>

	<div class={`${containerClass} mx-auto relative z-10 text-center`}>
		<!-- Label badge -->
		<div class="inline-block mb-8 fade-in">
			<span class="px-4 py-2 rounded-full bg-surface/80 backdrop-blur-sm border border-border text-muted text-sm font-medium shadow-sm">
				{label}
			</span>
		</div>

		<!-- Main heading -->
		<h1 class="font-heading text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-8 leading-tight tracking-tight fade-in" style="animation-delay: 0.1s;">
			<slot name="heading">
				{heading}
				{gradientText && (
					<>
						<br />
						<span class="bg-linear-to-r from-primary to-accent bg-clip-text text-transparent animate-gradient-text">
							{gradientText}
						</span>
					</>
				)}
			</slot>
		</h1>

		<!-- Subheading -->
		<p class="font-body text-xl md:text-2xl text-muted max-w-3xl mx-auto leading-relaxed fade-in mb-12" style="animation-delay: 0.2s;">
			{subheading}
		</p>

		<!-- Custom content slot for metrics, buttons, etc. -->
		<div class="fade-in" style="animation-delay: 0.3s;">
			<slot />
		</div>
	</div>
</section>

<style>
	/* Subtle animated gradient */
	@keyframes gradient {
		0%, 100% {
			opacity: 0.3;
		}
		50% {
			opacity: 0.5;
		}
	}

	.animate-gradient {
		animation: gradient 8s ease-in-out infinite;
	}

	/* Gradient text animation */
	@keyframes gradient-text {
		0%, 100% {
			background-position: 0 50%;
		}
		50% {
			background-position: 100% 50%;
		}
	}

	.animate-gradient-text {
		background-size: 200% 200%;
		animation: gradient-text 6s ease-in-out infinite;
	}

	/* Fade in animation */
	@keyframes fadeIn {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	@keyframes fadeInNoMotion {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	.fade-in {
		opacity: 0;
		animation: fadeIn 0.8s ease-out forwards;
	}

	@media (prefers-reduced-motion: reduce) {
		.fade-in {
			animation: fadeInNoMotion 0.8s ease-out forwards !important;
		}
	}
</style>
